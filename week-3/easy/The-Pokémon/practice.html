<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        .input-form{
            margin: 0 auto;
            padding: 20px;
            background-color: rgb(204, 198, 38);
            display: flex;
            justify-content: center;
            text-align: center;
            cursor: pointer;
        }
        .form-body div{
            padding: 10px;

        }
        .submit{
            padding: 5px 10px;
            font-size: 14px;
            color: white;
            background-color: black;
            border-radius: 10px;
            text-align: center;
            
            /* vertical-align: bottom; */
        }
        .card-container{
            padding: 10px;
            background-color: rgb(227, 195, 195);
            display: grid;
            grid-template-columns: auto;
        }
        .pokemon-cards{
            margin: 10px auto;

        }
        .card-bottom{
            display: flex;
            justify-content: space-around;
        }
    </style>
    <script>
        document.addEventListener('DOMContentLoaded', function(){

            document.querySelector('.submit').addEventListener('click', async function fetchPokeData() {
                let receivedCards = 0
                let id = Math.floor(Math.random() * 1000) + 1;
                let reqCat = document.querySelector('#category').value.toLowerCase()
                let reqCards = document.querySelector('#numberOfCards').value
                // 
                document.querySelector('body').removeChild(document.querySelector('.card-container-outside'))
                let main = document.createElement('div')
                main.className = "card-container-outside"
                document.querySelector('body').appendChild(main)
                while(receivedCards<reqCards){
        
                    try {
                        // fetch data from API
                        const response = await fetch(`https://pokeapi.co/api/v2/pokemon/${id}` )
                        const data = await response.json();
                        console.log('data is fetched');
                        
                        // extract required data
                        // const hp = data.hp
                        const pic = data.sprites.front_default;
                        const name = data.name
                        const category = data.types[0].type.name;
                        console.log(category);
                        
                        const attack = data.attack
                        const damage = data.damage
                        const speed = data.speed
            
                        if (reqCat == category) {
                            receivedCards++

                            // cardBox is created with class
                            let cardBox = document.createElement('div')
                            cardBox.className = "pokemon-cards"

                            // Top div is created
                            let topDiv = document.createElement('div')
                            topDiv.className = "hp"
                            topDiv.innerHTML = `HP + API DATA`
                            cardBox.appendChild(topDiv)

                            // main div created
                            let mainDiv = document.createElement('div')
                            mainDiv.className = "card-main"
                            let image = document.createElement('img')
                            image.src = pic;
                            let title = document.createElement('h2')
                            title.innerHTML = name;
                            let species = document.createElement('h3')
                            species.innerText = category;
                            mainDiv.appendChild(image)
                            mainDiv.appendChild(title)
                            mainDiv.appendChild(species)
                            cardBox.appendChild(mainDiv)

                            // bottom div created
                            let bottom = document.createElement('div')
                            bottom.className = "card-bottom"

                            //attack box in bottom div
                            let attBox = document.createElement('div')
                            attBox.className = "attack-box"
                            let attStat = document.createElement('div')
                            attStat.className = "attack-stats"
                            attStat.innerText = " API Data "
                            attBox.appendChild(attStat)
                            let attStatsName = document.createElement('div')
                            attStatsName.className = "bottom-text"
                            attStatsName.innerHTML = "Attack"
                            attBox.appendChild(attStatsName)
                            bottom.appendChild(attBox)

                            //defence box in bottom div
                            let defBox = document.createElement('div')
                            defBox.className = "defence-box"
                            let defStat = document.createElement('div')
                            defStat.className = "defence-stats"
                            defStat.innerText = " API Data "
                            defBox.appendChild(defStat)
                            let defStatsName = document.createElement('div')
                            defStatsName.className = "bottom-text"
                            defStatsName.innerHTML = "Defence"
                            defStatsName.className = "bottom-text"
                            defStatsName.innerHTML = "Attack"
                            defBox.appendChild(defStatsName)
                            bottom.appendChild(defBox)
                            
                            //speed box in bottom div
                            let speBox = document.createElement('div')
                            speBox.className = "speed-box"
                            let speStat = document.createElement('div')
                            speStat.className = "speed-stats"
                            speStat.innerText = " API Data "
                            speBox.appendChild(speStat)
                            let speStatsName = document.createElement('div')
                            speStatsName.className = "bottom-text"
                            speStatsName.innerHTML = "Speed"
                            speBox.appendChild(speStatsName)
                            bottom.appendChild(speBox)

                            cardBox.appendChild(bottom)
                            
                            let xyz = document.createElement('div')
                            xyz.className = "card-container"

                            document.querySelector('.card-container-outside').appendChild(xyz.appendChild(cardBox))
                            // if (receivedCards%3 = 1) {

                                
                            // } else{
                            //     document.querySelector('#card-container-outside').appendChild(cardBox)

                            // }
                            
                        } 
                        id++
                    } catch (error) {
                        console.log(`${error} occured while fetching API Data`);
                    }
        
                }
            })
        })
    </script>
</head>
<body>
    <div class="input-form">
        <div class="form-body">
            <div class="category">
                Choose Category <input type="text" id="category">
            </div>
            <br>
            <div>
                Number of Cards <input type="number" id="numberOfCards" min="1" >
            </div>
            <br>
            <span class="submit">
                Submit
            </span>
        </div>
    </div>
    <br>
    <div class="card-container-outside">
        <!-- <div class="pokemon-cards">
            <div class="card-top">
                <div class="hp">HP String</div>
            </div>
            <div class="card-main">
                <img src="" alt="">
                <h1 id="name"></h1>
                <h3 id="category"></h3>
            </div>
            <div class="card-bottom">
                <div class="attack-box">
                    <div class="attack-stats">

                    </div>
                    <div>
                        attack
                    </div>

                </div>
                <div class="defence-box">
                    <div id="stats">

                    </div>
                    <div>
                        attack
                    </div>
                    
                </div>
                <div class="speed-box">
                    <div id="stats">

                    </div>
                    <div>
                        attack
                    </div>
                    
                </div>
            </div>


        </div> -->
    </div>
    
</body>
</html>